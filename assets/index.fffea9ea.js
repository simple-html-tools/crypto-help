var A=Object.defineProperty;var R=(e,r,l)=>r in e?A(e,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[r]=l;var f=(e,r,l)=>(R(e,typeof r!="symbol"?r+"":r,l),l);import{D as x,G as T,a as w,c as L,j as g,R as p,P as G,r as N,b as F}from"./vendor.a56c04d0.js";const I=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function l(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=l(t);fetch(t.href,o)}};I();const v=new w,C=new x(v),O=new T({cellHeight:20,panelHeight:25,footerHeight:35,readonly:!0,selectionMode:"multiple",groups:[]},C),S=new w,U=new x(S),E=new Set,P=new Set,s={coinNames:E,walletNames:P,importDataContainer:S,importDataSource:U,mainDataContainer:v,mainDataSource:C,mainGridInterface:O};let k=!1;function H(){if(!k){k=!0;const e=c.getState(),r=window.localStorage.getItem("theme");r===void 0?(window.localStorage.setItem("theme","Y"),e.setDarkTheme(!0),document.getElementsByTagName("HTML")[0].className="dark"):(r!=="Y"?document.getElementsByTagName("HTML")[0].className="":document.getElementsByTagName("HTML")[0].className="dark",e.setDarkTheme(r==="Y"))}}function B(e){e?document.getElementsByTagName("HTML")[0].className="dark":document.getElementsByTagName("HTML")[0].className="",window.localStorage.setItem("theme",e?"Y":"N")}const c=L(e=>({loadingData:!1,activateLoadingData:()=>e(()=>({loadingData:!0})),deactivateLoadingData:()=>e(()=>({loadingData:!1})),darktheme:!0,setDarkTheme:r=>e(()=>({darktheme:r})),toggleDarkMode:()=>{e(r=>{const l=!r.darktheme;return B(l),{darktheme:l}})},dialogContent:"",dialogHeader:"",errormsg:"",coinCount:0,walletCount:0,walletsNames:[],coinsNames:[],coinInput:"",walletInput:"",coinSelected:new Set,walletSelected:new Set})),a=g.exports.jsx,u=g.exports.jsxs,D=g.exports.Fragment;class M extends p.Component{constructor(r){super(r);f(this,"enabled");f(this,"myRef");this.enabled=r.enabled,this.myRef=p.createRef()}shouldComponentUpdate(r){return this.enabled=!!r.enabled,!0}componentDidMount(){this.componentDidUpdate()}componentDidUpdate(){var r;if(this.enabled)this.myRef.current.append(document.createTextNode(`
        body,
        .simple-html-grid-menu,
        .simple-html-grid {
            --simple-html-grid-main-bg-color: #374151;
            --simple-html-grid-sec-bg-color: #4b5563;
            --simple-html-grid-alt-bg-color: #4b5563;
            --simple-html-grid-main-bg-border: #1f2937;
            --simple-html-grid-sec-bg-border: #1f2937;
            --simple-html-grid-main-bg-selected: #234882;
            --simple-html-grid-main-font-color: #f9f7f7;
            --simple-html-grid-sec-font-color: #979494;
            --simple-html-grid-dropzone-color: #979494;
            --simple-html-grid-grouping-border: #1f2937;
            --simple-html-grid-boxshadow: #4b5563;
            --simple-html-grid-main-hr-border: #4b5563;
        }

        .simple-html-grid ul.dialog-row {
            box-shadow: none;
            border-top: 1px solid #3b3b3c;
        }
        .simple-html-grid li.dialog-row {
            border-color: #374151;
            border-left: 1px dotted rgb(100, 100, 100);
        }
        .simple-html-grid .grid-edit-button {
            border-color: #374151;
        }
        
        `));else{let l=this.myRef.current.childNodes;for(;l.length;)(r=l[0])==null||r.parentNode.removeChild(l[0]),l=this.myRef.current.childNodes}}render(){return a("style",{ref:this.myRef})}}function W(){const e=c();return e.loadingData?a("div",{className:"fixed grid w-full h-full items-center justify-center fadeIn z-[5000] bg-gray-50/50",children:u("div",{className:"block w-96 h-80 bg-gray-100 dark:bg-gray-800",children:[a("span",{className:"m-auto block text-center text-2xl bg-gray-300 p-2 dark:bg-gray-700 dark:text-white",children:"Please wait"}),a("div",{className:"block m-2 mt-10",children:a("span",{className:"m-auto block text-center loader dark:text-white"})}),a("span",{className:"m-auto block text-center underline font-semibold dark:text-white",children:e.dialogHeader}),a("span",{className:"m-auto block text-center mt-4 whitespace-pre-line dark:text-white",children:e.dialogContent||""})]})}):null}function j(){return a("footer",{className:"block text-center p-1 m-1  dark:text-gray-300 ",children:a("div",{className:"flex"})})}function V(){return c().darktheme?a(D,{children:"\u{1F31E}"}):a(D,{children:"\u{1F31C}"})}function z(e){return e?"opacity-50 cursor-not-allowed":""}async function Y(){var r;if(typeof showOpenFilePicker!="function"){c.setState({errormsg:"Your browser does not support filesystem Access Api, use newest Chrome/Edge "});return}if(((r=location.hash.split("?")[0])==null?void 0:r.split("/")[3])||"Default"){const l={types:[{description:"coinpanda csv",accept:{"csv/csv":[".csv"]}}],excludeAcceptAllOption:!0,multiple:!1},n=await showOpenFilePicker(l);if((n==null?void 0:n.length)>0){let t=function(i){if(i)return i};const d=await(await n[0].getFile()).text(),m=G.parse(d,{header:!0});m==null||m.data.shift();const b=(m==null?void 0:m.data)||[];s.coinNames.clear(),s.coinNames.clear(),b.forEach(i=>{i.Date=new Date(i.Date),i["Sent Amount"]=t(i["Sent Amount"]),i["Sent Currency"]&&s.coinNames.add(i["Sent Currency"]),i["Sent Wallet"]&&s.walletNames.add(i["Sent Wallet"]),i["Received Amount"]&&(i["Received Amount"]=t(i["Received Amount"])),i["Received Currency"]&&s.coinNames.add(i["Received Currency"]),i["Received Wallet"]&&s.walletNames.add(i["Received Wallet"]),i["Fee Amount"]=t(i["Fee Amount"]),i["Fee Currency"]&&s.coinNames.add(i["Fee Currency"]),i["Cost Basis"]=t(i["Cost Basis"]),i.PnL=t(i.PnL),i["Fee Cost Basis"]=t(i["Fee Cost Basis"]),i["Fee PnL"]=t(i["Fee PnL"])});const y={cellHeight:20,panelHeight:25,footerHeight:35,readonly:!0,selectionMode:"multiple",groups:[],filterSet:[],sortingSet:[],groupingExpanded:[],groupingSet:[]};y.groups=[{width:100,rows:[{header:"Transaction ID",attribute:"Transaction ID",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Date",attribute:"Date",type:"date",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Type",attribute:"Type",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Tag",attribute:"Tag",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Amount",attribute:"Sent Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Amount",attribute:"Received Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Currency",attribute:"Sent Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Currency",attribute:"Received Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Wallet",attribute:"Sent Wallet",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Wallet",attribute:"Received Wallet",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Address",attribute:"Sent Address",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Address",attribute:"Received Address",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Fee Currency",attribute:"Fee Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Fee Amount",attribute:"Fee Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Cost Basis",attribute:"Cost Basis",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"PnL",attribute:"PnL",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Fee Cost Basis",attribute:"Fee Cost Basis",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Fee PnL",attribute:"Fee PnL",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},,{width:100,rows:[{header:"Description",attribute:"Description",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Tx Details",attribute:"Tx Details",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Transaction Hash",attribute:"Transaction Hash",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]}],s.mainGridInterface.loadSettings(y,!0),s.mainDataSource.setData(b),s.mainGridInterface.autoResizeColumns(),c.setState({coinCount:s.coinNames.size,walletCount:s.walletNames.size,walletsNames:Array.from(s.walletNames).filter(i=>i.toLowerCase().indexOf(c.getState().walletInput.toLowerCase())>-1),coinsNames:Array.from(s.coinNames).filter(i=>i.toLowerCase().indexOf(c.getState().coinInput.toLowerCase())>-1)})}}}function q(){const e=c();return a("button",{className:z(e.loadingData)+"  p-2 m-1  hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none dark:text-blue-400 font-semibold",disabled:e.loadingData,onClick:()=>Y(),children:"\u{1F4D6}"})}function K(){const e=c();return u("header",{className:"flex text-center text-xl p-1 m-1 bg-gray-200/75 dark:bg-gray-800 dark:text-white ",children:[a("div",{className:"flex-1 flex flex-row",children:a(q,{})}),a("div",{className:"flex-1 text-3xl",children:"Coinpanda transaction helper"}),a("div",{className:"flex flex-1 flex-row-reverse",children:a("button",{className:"block focus:outline-none mr-5",onClick:()=>{e.toggleDarkMode()},children:a(V,{})})})]})}class $ extends p.Component{constructor(r){super(r);f(this,"myRef");this.myRef=p.createRef()}shouldComponentUpdate(){return!0}componentDidMount(){this.myRef.current.resizeInit=!0,this.myRef.current.interface=this.props.interface,this.myRef.current.connectedCallback()}render(){var r,l;return a("simple-html-grid",{ref:this.myRef,style:{width:(r=this.props.style)==null?void 0:r.width,height:(l=this.props.style)==null?void 0:l.height},class:this.props.className})}}function h(){const e=s.mainDataSource,r=c.getState(),l=Array.from(r.coinSelected),n=Array.from(r.walletSelected);n.length===0&&l.length===0&&s.mainGridInterface.clearAllFilters(),n.length&&l.length&&e.filter({logicalOperator:"AND",type:"GROUP",filterArguments:[{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(t=>t.toUpperCase())},{attribute:"Received Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(t=>t.toUpperCase())}]},{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:l.map(t=>t.toUpperCase())},{attribute:"Received Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:l.map(t=>t.toUpperCase())}]}]}),n.length&&l.length===0&&e.filter({logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(t=>t.toUpperCase())},{attribute:"Received Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(t=>t.toUpperCase())}]}),n.length===0&&l.length&&e.filter({logicalOperator:"AND",type:"GROUP",filterArguments:[{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:l.map(t=>t.toUpperCase())},{attribute:"Received Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:l.map(t=>t.toUpperCase())}]}]})}function J(){const e=c(),[r,l]=N.exports.useState(0),n={height:"calc(100vh - 200px)"};return u("div",{className:"flex w-[300px] min-w-[200px]  m-2 dark:text-white flex-col border-r border-gray-200 dark:border-gray-700",children:[u("span",{className:"font-semibold m-2",children:["Wallets (",e.walletCount,")"]}),a("div",{className:"flex align-middle",children:a("input",{className:"p-2 m-1 flex-1 outline-none text-black",placeholder:"type wallet",value:e.walletInput,onInput:t=>{const o=t.target.value;c.setState({walletInput:o,walletsNames:Array.from(s.walletNames).filter(d=>d.toLowerCase().indexOf(o.toLowerCase())>-1)})}})}),a("div",{style:n,className:"flex flex-col  overflow-y-auto overflow-x-hidden scrollbar",children:e.walletsNames.map((t,o)=>{const d=e.walletSelected.has(t)?"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded":"hidden",m=e.walletSelected.has(t)?"hidden":"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded";return u("div",{className:"p-2 m-2 flex flex-row border-b border-gray-200 dark:border-gray-700",children:[a("span",{className:"flex-1",children:t}),a("span",{onClick:()=>{e.walletSelected.delete(t),l(r+1),h()},className:d,children:"\u2714\uFE0F"}),a("span",{onClick:()=>{e.walletSelected.add(t),l(r+1),h()},className:m,children:"\u{1F50D}"})]},o)})})]})}function Q(){const e=c(),[r,l]=N.exports.useState(0),n={height:"calc(100vh - 200px)"};return u("div",{className:"flex w-[300px] min-w-[200px]  m-2 dark:text-white flex-col border-r border-gray-200 dark:border-gray-700",children:[u("span",{className:"font-semibold m-2",children:["Coins (",e.coinCount,")"]}),a("div",{className:"flex align-middle",children:a("input",{className:"p-2 m-1 flex-1 outline-none text-black",placeholder:"type wallet",value:e.coinInput,onInput:t=>{const o=t.target.value;c.setState({coinInput:o,coinsNames:Array.from(s.coinNames).filter(d=>d.toLowerCase().indexOf(o.toLowerCase())>-1)})}})}),a("div",{style:n,className:"flex flex-col  overflow-y-auto overflow-x-hidden scrollbar",children:e.coinsNames.map((t,o)=>{const d=e.coinSelected.has(t)?"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded":"hidden",m=e.coinSelected.has(t)?"hidden":"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded";return u("div",{className:"p-2 m-2 flex flex-row border-b border-gray-200 dark:border-gray-700",children:[a("span",{className:"flex-1",children:t}),a("span",{onClick:()=>{e.coinSelected.delete(t),l(r+1),h()},className:d,children:"\u2714\uFE0F"}),a("span",{onClick:()=>{e.coinSelected.add(t),l(r+1),h()},className:m,children:"\u{1F50D}"})]},o)})})]})}H();function X(){const e=c();return u("div",{className:"app bg-gray-100 dark:bg-gray-800",children:[a(M,{enabled:e.darktheme}),a(W,{}),u("div",{className:"flex flex-col h-full ",children:[a(K,{}),u("div",{className:"flex flex-row h-full",children:[a(J,{}),a(Q,{}),u("div",{className:"flex flex-col h-full w-full",children:[e.errormsg?u("span",{className:"ml-2 text-red-500 font-semibold ",children:[a("span",{className:"underline",children:"Error:"}),e.errormsg]}):"",a($,{className:"simple-html-grid flex-grow h-full m-3",interface:s.mainGridInterface})]})]}),a(j,{})]})]})}F.render(a(p.StrictMode,{children:a(X,{})}),document.getElementById("root"));

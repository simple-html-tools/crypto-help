var T=Object.defineProperty;var R=(e,l,a)=>l in e?T(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;var h=(e,l,a)=>(R(e,typeof l!="symbol"?l+"":l,a),a);import{D as x,G as L,a as w,c as F,j as b,R as g,P as G,r as N,b as O}from"./vendor.055c2814.js";const I=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}};I();const v=new w,D=new x(v),U=new L({cellHeight:20,panelHeight:25,footerHeight:35,readonly:!0,selectionMode:"multiple",groups:[]},D),C=new w,E=new x(C),P=new Set,H=new Set,d={coinNames:P,walletNames:H,importDataContainer:C,importDataSource:E,mainDataContainer:v,mainDataSource:D,mainGridInterface:U};let A=!1;function B(){if(!A){A=!0;const e=c.getState(),l=window.localStorage.getItem("theme")||"Y";l===void 0?(window.localStorage.setItem("theme","Y"),e.setDarkTheme(!0),document.getElementsByTagName("HTML")[0].className="dark"):(l!=="Y"?document.getElementsByTagName("HTML")[0].className="":document.getElementsByTagName("HTML")[0].className="dark",e.setDarkTheme(l==="Y"))}}function M(e){e?document.getElementsByTagName("HTML")[0].className="dark":document.getElementsByTagName("HTML")[0].className="",window.localStorage.setItem("theme",e?"Y":"N")}const c=F(e=>({loadingData:!1,activateLoadingData:()=>e(()=>({loadingData:!0})),deactivateLoadingData:()=>e(()=>({loadingData:!1})),darktheme:!0,setDarkTheme:l=>e(()=>({darktheme:l})),toggleDarkMode:()=>{e(l=>{const a=!l.darktheme;return M(a),{darktheme:a}})},dialogContent:"",dialogHeader:"",errormsg:"",coinCount:0,walletCount:0,walletsNames:[],coinsNames:[],coinInput:"",walletInput:"",coinSelected:new Set,walletSelected:new Set,fromDate:"",toDate:""})),r=b.exports.jsx,u=b.exports.jsxs,S=b.exports.Fragment;class _ extends g.Component{constructor(l){super(l);h(this,"enabled");h(this,"myRef");this.enabled=l.enabled,this.myRef=g.createRef()}shouldComponentUpdate(l){return this.enabled=!!l.enabled,!0}componentDidMount(){this.componentDidUpdate()}componentDidUpdate(){var l;if(this.enabled)this.myRef.current.append(document.createTextNode(`
                body,
                .simple-html-grid-menu,
                .simple-html-grid {
                    --simple-html-grid-main-bg-color: #374151;
                    --simple-html-grid-sec-bg-color: #4b5563;
                    --simple-html-grid-alt-bg-color: #4b5563;
                    --simple-html-grid-main-bg-border: #1f2937;
                    --simple-html-grid-sec-bg-border: #1f2937;
                    --simple-html-grid-main-bg-selected: #234882;
                    --simple-html-grid-main-font-color: #f9f7f7;
                    --simple-html-grid-sec-font-color: #979494;
                    --simple-html-grid-dropzone-color: #979494;
                    --simple-html-grid-grouping-border: #1f2937;
                    --simple-html-grid-boxshadow: #4b5563;
                    --simple-html-grid-main-hr-border: #4b5563;
                }
            
                .simple-html-grid ul.dialog-row {
                    box-shadow: none;
                  
                }
                .simple-html-grid li.dialog-row {
        
                    border-left: 1px dotted rgb(100, 100, 100);
                } 
                .simple-html-grid .grid-edit-button {
                    border-color: #374151;
                }
                .simple-html-grid .filter-dialog-bottom-row{
                    border-top: 0px;
                }
        
                .simple-html-grid .filter-dialog-bottom-row button{
                    border: 1px solid #515458;
                }
                simple-html-grid-filter-dialog ul input{
                    color: var(--simple-html-grid-main-font-color);
                    background-color: var(--simple-html-grid-alt-bg-color);
                }

                simple-html-grid-filter-dialog ul textarea{
                    color: var(--simple-html-grid-main-font-color);
                    background-color: var(--simple-html-grid-alt-bg-color);
                }
                
        
        `));else{let a=this.myRef.current.childNodes;for(;a.length;)(l=a[0])==null||l.parentNode.removeChild(a[0]),a=this.myRef.current.childNodes}}render(){return r("style",{ref:this.myRef})}}function W(){const e=c();return e.loadingData?r("div",{className:"fixed grid w-full h-full items-center justify-center fadeIn z-[5000] bg-gray-50/50",children:u("div",{className:"block w-96 h-80 bg-gray-100 dark:bg-gray-800",children:[r("span",{className:"m-auto block text-center text-2xl bg-gray-300 p-2 dark:bg-gray-700 dark:text-white",children:"Please wait"}),r("div",{className:"block m-2 mt-10",children:r("span",{className:"m-auto block text-center loader dark:text-white"})}),r("span",{className:"m-auto block text-center underline font-semibold dark:text-white",children:e.dialogHeader}),r("span",{className:"m-auto block text-center mt-4 whitespace-pre-line dark:text-white",children:e.dialogContent||""})]})}):null}function V(){return r("footer",{className:"block text-center p-1 m-1  dark:text-gray-300 ",children:r("div",{className:"flex"})})}function j(){return c().darktheme?r(S,{children:"\u{1F31E}"}):r(S,{children:"\u{1F31C}"})}function k(e){return e?"opacity-50 cursor-not-allowed":""}function Y(){const e=c();return r("button",{className:k(e.loadingData)+"  p-2 m-1  hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none dark:text-blue-400 font-semibold",disabled:e.loadingData,onClick:()=>d.mainGridInterface.showFilterDialog(),children:"\u{1F50D}"})}async function z(){var l;if(typeof showOpenFilePicker!="function"){c.setState({errormsg:"Your browser does not support filesystem Access Api, use newest Chrome/Edge "});return}if(((l=location.hash.split("?")[0])==null?void 0:l.split("/")[3])||"Default"){const a={types:[{description:"coinpanda csv",accept:{"csv/csv":[".csv"]}}],excludeAcceptAllOption:!0,multiple:!1},n=await showOpenFilePicker(a);if((n==null?void 0:n.length)>0){let t=function(o){if(o)return o};const s=await(await n[0].getFile()).text(),m=G.parse(s,{header:!0});m==null||m.data.shift();const p=(m==null?void 0:m.data)||[];d.coinNames.clear(),d.coinNames.clear(),p.forEach(o=>{o.Date=new Date(o.Date),o["Sent Amount"]=t(o["Sent Amount"]),o["Sent Currency"]&&d.coinNames.add(o["Sent Currency"]),o["Sent Wallet"]&&d.walletNames.add(o["Sent Wallet"]),o["Received Amount"]&&(o["Received Amount"]=t(o["Received Amount"])),o["Received Currency"]&&d.coinNames.add(o["Received Currency"]),o["Received Wallet"]&&d.walletNames.add(o["Received Wallet"]),o["Fee Amount"]=t(o["Fee Amount"]),o["Fee Currency"]&&d.coinNames.add(o["Fee Currency"]),o["Cost Basis"]=t(o["Cost Basis"]),o.PnL=t(o.PnL),o["Fee Cost Basis"]=t(o["Fee Cost Basis"]),o["Fee PnL"]=t(o["Fee PnL"])});const y={cellHeight:20,panelHeight:25,footerHeight:35,readonly:!0,selectionMode:"multiple",groups:[],filterSet:[],sortingSet:[],groupingExpanded:[],groupingSet:[]};y.groups=[{width:100,rows:[{header:"Transaction ID",attribute:"Transaction ID",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Date",attribute:"Date",type:"date",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Type",attribute:"Type",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Tag",attribute:"Tag",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Amount",attribute:"Sent Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Amount",attribute:"Received Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Currency",attribute:"Sent Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Currency",attribute:"Received Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Wallet",attribute:"Sent Wallet",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Wallet",attribute:"Received Wallet",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Sent Address",attribute:"Sent Address",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Received Address",attribute:"Received Address",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Fee Currency",attribute:"Fee Currency",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Fee Amount",attribute:"Fee Amount",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Cost Basis",attribute:"Cost Basis",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"PnL",attribute:"PnL",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Fee Cost Basis",attribute:"Fee Cost Basis",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Fee PnL",attribute:"Fee PnL",type:"number",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},,{width:100,rows:[{header:"Description",attribute:"Description",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]},{width:100,rows:[{header:"Tx Details",attribute:"Tx Details",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0},{header:"Transaction Hash",attribute:"Transaction Hash",type:"text",filterable:{placeholder:"filter"},sortable:{},allowGrouping:!0}]}],d.mainGridInterface.loadSettings(y,!0),d.mainDataSource.setData(p),d.mainGridInterface.autoResizeColumns(),c.setState({coinCount:d.coinNames.size,walletCount:d.walletNames.size,walletsNames:Array.from(d.walletNames).filter(o=>o.toLowerCase().indexOf(c.getState().walletInput.toLowerCase())>-1),coinsNames:Array.from(d.coinNames).filter(o=>o.toLowerCase().indexOf(c.getState().coinInput.toLowerCase())>-1)})}}}function Q(){const e=c();return r("button",{className:k(e.loadingData)+"  p-2 m-1  hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none dark:text-blue-400 font-semibold",disabled:e.loadingData,onClick:()=>z(),children:"\u{1F4D6}"})}function $(){const e=c();return u("header",{className:"flex text-center text-xl p-1 m-1 bg-gray-200/75 dark:bg-gray-800 dark:text-white ",children:[u("div",{className:"flex-1 flex flex-row",children:[r(Q,{})," ",r(Y,{})]}),r("div",{className:"flex-1 text-3xl",children:"Coinpanda transaction helper"}),r("div",{className:"flex flex-1 flex-row-reverse",children:r("button",{className:"block focus:outline-none mr-5",onClick:()=>{e.toggleDarkMode()},children:r(j,{})})})]})}class q extends g.Component{constructor(l){super(l);h(this,"myRef");this.myRef=g.createRef()}shouldComponentUpdate(){return!0}componentDidMount(){this.myRef.current.resizeInit=!0,this.myRef.current.interface=this.props.interface,this.myRef.current.connectedCallback()}render(){var l,a;return r("simple-html-grid",{ref:this.myRef,style:{width:(l=this.props.style)==null?void 0:l.width,height:(a=this.props.style)==null?void 0:a.height},class:this.props.className})}}function f(){const e=d.mainDataSource,l=c.getState(),a=Array.from(l.coinSelected),n=Array.from(l.walletSelected),t=l.fromDate,i=l.toDate;n.length===0&&a.length===0&&d.mainGridInterface.clearAllFilters();let s=null;n.length&&a.length&&(s={logicalOperator:"AND",type:"GROUP",filterArguments:[{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(p=>p.toUpperCase())},{attribute:"Received Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(p=>p.toUpperCase())}]},{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:a.map(p=>p.toUpperCase())},{attribute:"Received Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:a.map(p=>p.toUpperCase())}]}]}),n.length&&a.length===0&&(s={logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(p=>p.toUpperCase())},{attribute:"Received Wallet",operator:"IN",attributeType:"text",valueType:"VALUE",value:n.map(p=>p.toUpperCase())}]}),n.length===0&&a.length&&(s={logicalOperator:"AND",type:"GROUP",filterArguments:[{logicalOperator:"OR",type:"GROUP",filterArguments:[{attribute:"Sent Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:a.map(p=>p.toUpperCase())},{attribute:"Received Currency",operator:"IN",attributeType:"text",valueType:"VALUE",value:a.map(p=>p.toUpperCase())}]}]});let m=null;switch(!0){case(t!==""&&i!==""):m={logicalOperator:"AND",type:"GROUP",filterArguments:[{attribute:"Date",operator:"GREATER_THAN_OR_EQUAL_TO",attributeType:"date",valueType:"VALUE",value:t},{attribute:"Date",operator:"LESS_THAN_OR_EQUAL_TO",attributeType:"date",valueType:"VALUE",value:i}]};break;case t!=="":m={logicalOperator:"AND",type:"GROUP",filterArguments:[{attribute:"Date",operator:"GREATER_THAN_OR_EQUAL_TO",attributeType:"date",valueType:"VALUE",value:t}]};break;case i!=="":m={logicalOperator:"AND",type:"GROUP",filterArguments:[{attribute:"Date",operator:"LESS_THAN_OR_EQUAL_TO",attributeType:"date",valueType:"VALUE",value:i}]};break}if(s&&m){e.filter(m.filterArguments.concat(s));return}if(s){e.filter(s);return}if(m){e.filter(m);return}}function K(){const e=c(),[l,a]=N.exports.useState(0),n={height:"calc(100vh - 300px)"};return u("div",{className:"flex w-[300px] min-w-[200px]  m-2 dark:text-white flex-col 0",children:[u("span",{className:"font-semibold m-2",children:["Wallets (",e.walletCount,")"]}),r("div",{className:"flex align-middle",children:r("input",{className:"p-[10px] m-1 flex-1 outline-none text-black",placeholder:"from date",value:e.walletInput,onInput:t=>{const i=t.target.value;c.setState({walletInput:i,walletsNames:Array.from(d.walletNames).filter(s=>s.toLowerCase().indexOf(i.toLowerCase())>-1)})}})}),r("div",{style:n,className:"flex flex-col  overflow-y-auto overflow-x-hidden scrollbar",children:e.walletsNames.map((t,i)=>{const s=e.walletSelected.has(t)?"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded":"hidden",m=e.walletSelected.has(t)?"hidden":"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded";return u("div",{className:"p-2 m-2 flex flex-row border-b border-gray-200 dark:border-gray-700",children:[r("span",{className:"flex-1",children:t}),r("span",{onClick:()=>{e.walletSelected.delete(t),a(l+1),f()},className:s,children:"\u2714\uFE0F"}),r("span",{onClick:()=>{e.walletSelected.add(t),a(l+1),f()},className:m,children:"\u{1F50D}"})]},i)})})]})}function J(){const e=c(),[l,a]=N.exports.useState(0),n={height:"calc(100vh - 300px)"};return u("div",{className:"flex w-[300px] min-w-[200px]  m-2 dark:text-white flex-col ",children:[u("span",{className:"font-semibold m-2",children:["Coins (",e.coinCount,")"]}),r("div",{className:"flex align-middle",children:r("input",{className:"p-[10px] m-1 flex-1 outline-none text-black",placeholder:"type wallet",value:e.coinInput,onInput:t=>{const i=t.target.value;c.setState({coinInput:i,coinsNames:Array.from(d.coinNames).filter(s=>s.toLowerCase().indexOf(i.toLowerCase())>-1)})}})}),r("div",{style:n,className:"flex flex-col  overflow-y-auto overflow-x-hidden scrollbar",children:e.coinsNames.map((t,i)=>{const s=e.coinSelected.has(t)?"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded":"hidden",m=e.coinSelected.has(t)?"hidden":"text-sm hover:bg-gray-300 dark:hover:bg-gray-600 rounded";return u("div",{className:"p-2 m-2 flex flex-row border-b border-gray-200 dark:border-gray-700",children:[r("span",{className:"flex-1",children:t}),r("span",{onClick:()=>{e.coinSelected.delete(t),a(l+1),f()},className:s,children:"\u2714\uFE0F"}),r("span",{onClick:()=>{e.coinSelected.add(t),a(l+1),f()},className:m,children:"\u{1F50D}"})]},i)})})]})}function X(){const e=c();function l(a){if(a){const n=new Date(a).getFullYear();let t=(new Date(a).getMonth()+1).toString();t.length===1&&(t="0"+t);let i=new Date(a).getDate().toString();return i.length===1&&(i="0"+i),`${n}-${t}-${i}`}return""}return r("div",{className:"flex flex-1 ",children:u("div",{className:"flex text-white flex-1",children:[u("div",{className:"flex flex-col p-2 flex-1",children:[r("span",{className:"font-semibold m-2",children:"From date:"}),r("div",{className:"flex align-middle",children:r("input",{className:"p-2 m-1 flex-1 outline-none text-black",placeholder:"from date",type:"date",value:l(e.fromDate),onInput:a=>{var t;const n=((t=a.target.valueAsDate)==null?void 0:t.getDate)?a.target.valueAsDate:"";f(),c.setState({fromDate:n})},onChange:a=>{var t;const n=((t=a.target.valueAsDate)==null?void 0:t.getDate)?a.target.valueAsDate:"";f(),c.setState({fromDate:n})}})})]}),u("div",{className:"flex flex-col p-2 flex-1",children:[r("span",{className:"font-semibold m-2",children:"From date:"}),r("div",{className:"flex align-middle",children:r("input",{className:"p-2 m-1 flex-1 outline-none text-black",placeholder:"type wallet",type:"date",value:l(e.toDate),onInput:a=>{var t;const n=((t=a.target.valueAsDate)==null?void 0:t.getDate)?a.target.valueAsDate:"";f(),c.setState({toDate:n})},onChange:a=>{var t;const n=((t=a.target.valueAsDate)==null?void 0:t.getDate)?a.target.valueAsDate:"";f(),c.setState({toDate:n})}})})]})]})})}B();function Z(){const e=c();return u("div",{className:"app bg-gray-100 dark:bg-gray-800",children:[r(_,{enabled:e.darktheme}),r(W,{}),u("div",{className:"flex flex-col h-full",children:[r($,{}),u("div",{className:"flex flex-row  h-full",children:[u("div",{className:"flex flex-col m-2",children:[r(X,{}),u("div",{className:"flex flex-row",children:[r(K,{}),r(J,{})]})]}),u("div",{className:"flex flex-col h-full w-full",children:[e.errormsg?u("span",{className:"ml-2 text-red-500 font-semibold ",children:[r("span",{className:"underline",children:"Error:"}),e.errormsg]}):"",r(q,{className:"simple-html-grid flex-grow h-full m-3",interface:d.mainGridInterface})]})]}),r(V,{})]})]})}O.render(r(g.StrictMode,{children:r(Z,{})}),document.getElementById("root"));
